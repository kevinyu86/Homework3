<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>HW3</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">HW3</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="task-1-conceptual-questions" class="level2">
<h2 class="anchored" data-anchor-id="task-1-conceptual-questions">Task 1: Conceptual Questions</h2>
<ol type="1">
<li><p>If your working directory is myfolder/homework/, what relative path would you specify to get the file located at myfolder/MyData.csv?</p>
<blockquote class="blockquote">
<p>../MyData.csv</p>
</blockquote></li>
<li><p>What are the major benefits of using R projects?</p>
<blockquote class="blockquote">
<p>Uisng R project, we could 1) keep all datasets and scripts in one directory; 2)set the working directory automatically to this project directory every time you open the project; 3) track changes to your scripts using Git, making it easy to collaborate with others; 4) document your analysis process using R Markdown and keep the documentation within the project. Overall, using R projects leads to a more organized, reproducible, and collaborative workflow, which is particularly beneficial for complex data analysis tasks and team-based projects.</p>
</blockquote></li>
<li><p>What is git and what is github?</p>
<blockquote class="blockquote">
<p>Git is a distributed version control system designed to handle everything from small to very large projects with speed and efficiency. GitHub is a web-based platform that leverages the capabilities of Git to provide a suite of tools for collaborative software development and version control.</p>
</blockquote></li>
<li><p>What are the two main differences between a tibble and a data.frame?</p>
<blockquote class="blockquote">
<p>1) Printing behavior</p>
<p>2) Subsetting</p>
</blockquote></li>
<li><p>Rewrite the following nested function call using baseR’s chaining operator: arrange(filter(select(as_tibble(iris), starts_with(“Petal”), Species), Petal.Length &lt; 1.55), Species)</p>
<blockquote class="blockquote">
<p>iris |&gt; as_tibble() |&gt; select(starts_with(“Petal”), Species) |&gt; filter(Petal.Length &lt; 1.55) |&gt; arrange(Species)</p>
</blockquote></li>
<li><p>What is meant by long format data and wide format data? Which do we generally prefer for statistical analysis?</p>
<blockquote class="blockquote">
<p>In long format data, each row represents a single observation, and multiple measurements or time points for the same subject are represented as multiple rows.</p>
<p>In wide format data, each row represents a single subject, and multiple measurements or time points for the same subject are represented as different columns.</p>
<p>Long format data is generally preferred for statistical analysis due to its flexibility and compatibility with many analysis and visualization tools. It allows for easier handling of complex data structures such as repeated measures and time series, making it a more versatile choice for a wide range of statistical tasks.</p>
</blockquote></li>
</ol>
</section>
<section id="task-2-reading-delimited-data" class="level2">
<h2 class="anchored" data-anchor-id="task-2-reading-delimited-data">Task 2 Reading Delimited Data</h2>
<p>Glass data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.0     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#read in data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>glass <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/glass.data"</span>, </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">delim =</span> <span class="st">","</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"ID"</span>, <span class="st">"RI"</span>, <span class="st">"Na"</span>, <span class="st">"Mg"</span>, <span class="st">"Al"</span>, <span class="st">"Si"</span>, <span class="st">"K"</span>, <span class="st">"Ca"</span>, <span class="st">"Ba"</span>, <span class="st">"Fe"</span>, <span class="st">"Type"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 214 Columns: 11
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
dbl (11): ID, RI, Na, Mg, Al, Si, K, Ca, Ba, Fe, Type

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print tibble </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>glass</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 214 × 11
      ID    RI    Na    Mg    Al    Si     K    Ca    Ba    Fe  Type
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1  1.52  13.6  4.49  1.1   71.8  0.06  8.75     0  0        1
 2     2  1.52  13.9  3.6   1.36  72.7  0.48  7.83     0  0        1
 3     3  1.52  13.5  3.55  1.54  73.0  0.39  7.78     0  0        1
 4     4  1.52  13.2  3.69  1.29  72.6  0.57  8.22     0  0        1
 5     5  1.52  13.3  3.62  1.24  73.1  0.55  8.07     0  0        1
 6     6  1.52  12.8  3.61  1.62  73.0  0.64  8.07     0  0.26     1
 7     7  1.52  13.3  3.6   1.14  73.1  0.58  8.17     0  0        1
 8     8  1.52  13.2  3.61  1.05  73.2  0.57  8.24     0  0        1
 9     9  1.52  14.0  3.58  1.37  72.1  0.56  8.3      0  0        1
10    10  1.52  13    3.6   1.36  73.0  0.57  8.4      0  0.11     1
# ℹ 204 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># overwrite last column and select observations</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>glass <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Type =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                        Type <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"building_windows_float_processed"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                        Type <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"building_windows_non_float_processed"</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                        Type <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"vehicle_windows_float_processed"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>                        Type <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"vehicle_windows_non_float_processed</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="st">(none in this database)"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                        Type <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"containers"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                        Type <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">"tableware"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>                        Type <span class="sc">==</span> <span class="dv">7</span> <span class="sc">~</span> <span class="st">"headlamps"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a> ) </span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span> (Fe <span class="sc">&lt;</span> <span class="fl">0.2</span> <span class="sc">|</span> Type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"tableware"</span>, <span class="st">"headlamp"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 189 × 11
      ID    RI    Na    Mg    Al    Si     K    Ca    Ba    Fe Type             
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;            
 1     1  1.52  13.6  4.49  1.1   71.8  0.06  8.75  0     0    building_windows…
 2     2  1.52  13.9  3.6   1.36  72.7  0.48  7.83  0     0    building_windows…
 3     3  1.52  13.5  3.55  1.54  73.0  0.39  7.78  0     0    building_windows…
 4     4  1.52  13.2  3.69  1.29  72.6  0.57  8.22  0     0    building_windows…
 5     5  1.52  13.3  3.62  1.24  73.1  0.55  8.07  0     0    building_windows…
 6     7  1.52  13.3  3.6   1.14  73.1  0.58  8.17  0     0    building_windows…
 7     8  1.52  13.2  3.61  1.05  73.2  0.57  8.24  0     0    building_windows…
 8     9  1.52  14.0  3.58  1.37  72.1  0.56  8.3   0     0    building_windows…
 9    10  1.52  13    3.6   1.36  73.0  0.57  8.4   0     0.11 building_windows…
10    12  1.52  12.8  3.66  1.27  73.0  0.6   8.56  0     0    building_windows…
11    14  1.52  12.9  3.56  1.27  73.2  0.54  8.38  0     0.17 building_windows…
12    15  1.52  12.6  3.59  1.31  73.3  0.58  8.5   0     0    building_windows…
13    16  1.52  12.8  3.54  1.23  73.2  0.58  8.39  0     0    building_windows…
14    17  1.52  12.7  3.67  1.16  73.1  0.61  8.7   0     0    building_windows…
15    18  1.52  14.4  3.85  0.89  71.4  0.15  9.15  0     0    building_windows…
16    19  1.52  13.9  3.73  1.18  72.1  0.06  8.89  0     0    building_windows…
17    20  1.52  13.0  3.54  1.69  72.7  0.54  8.44  0     0.07 building_windows…
18    21  1.52  12.8  3.55  1.49  72.8  0.54  8.52  0     0.19 building_windows…
19    22  1.52  14.8  3.75  0.29  72.0  0.03  9     0     0    building_windows…
20    23  1.52  12.8  3.62  1.29  72.8  0.59  8.7   0     0    building_windows…
21    24  1.52  12.8  3.57  1.35  73.0  0.62  8.59  0     0    building_windows…
22    25  1.52  13.4  3.5   1.15  72.8  0.5   8.43  0     0    building_windows…
23    26  1.52  13.0  3.54  1.21  73    0.65  8.53  0     0    building_windows…
24    27  1.52  13.2  3.48  1.41  72.6  0.59  8.43  0     0    building_windows…
25    28  1.52  12.9  3.48  1.33  73.0  0.56  8.43  0     0    building_windows…
26    29  1.52  12.6  3.52  1.43  73.2  0.57  8.54  0     0    building_windows…
27    30  1.52  13.1  3.49  1.28  72.9  0.6   8.49  0     0    building_windows…
28    31  1.52  12.6  3.56  1.3   73.1  0.61  8.69  0     0.14 building_windows…
29    32  1.52  12.8  3.5   1.14  73.3  0.56  8.55  0     0    building_windows…
30    34  1.52  12.6  3.47  1.38  73.4  0.6   8.55  0     0.06 building_windows…
31    35  1.52  12.7  3.54  1.34  73.0  0.57  8.75  0     0    building_windows…
32    36  1.52  13.3  3.45  1.21  72.7  0.56  8.57  0     0    building_windows…
33    37  1.52  13.9  3.53  1.32  71.8  0.51  8.78  0.11  0    building_windows…
34    38  1.52  12.7  3.48  1.35  73.0  0.64  8.68  0     0    building_windows…
35    39  1.52  14.2  3.82  0.47  71.8  0.11  9.57  0     0    building_windows…
36    40  1.52  14.2  3.82  0.47  71.8  0.11  9.57  0     0    building_windows…
37    41  1.52  12.8  3.5   1.12  73.0  0.64  8.77  0     0    building_windows…
38    42  1.52  12.7  3.42  1.2   73.2  0.59  8.64  0     0    building_windows…
39    43  1.52  13.2  3.39  1.33  72.8  0.59  8.59  0     0    building_windows…
40    44  1.52  13.7  3.84  0.72  71.8  0.17  9.74  0     0    building_windows…
41    46  1.52  13.5  3.48  1.35  72.0  0.55  9     0     0    building_windows…
42    47  1.52  13.2  3.37  1.18  72.7  0.57  8.83  0     0.16 building_windows…
43    48  1.53  14.0  3.7   0.71  71.6  0.02  9.82  0     0.1  building_windows…
44    49  1.52  13.2  3.77  0.79  72.0  0.13 10.0   0     0    building_windows…
45    50  1.52  13.6  3.35  1.23  72.1  0.59  8.91  0     0    building_windows…
46    51  1.52  13.7  3.72  0.51  71.8  0.09 10.1   0     0.16 building_windows…
47    52  1.52  13.2  3.33  1.28  72.4  0.6   9.14  0     0.11 building_windows…
48    53  1.52  13.4  2.87  1.19  72.8  0.55  9.03  0     0    building_windows…
49    54  1.52  13.1  2.84  1.28  72.8  0.55  9.07  0     0    building_windows…
50    55  1.52  13.2  2.81  1.29  73.0  0.51  9.02  0     0.09 building_windows…
# ℹ 139 more rows</code></pre>
</div>
</div>
<p>Yeast data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#read in data</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>yeast <span class="ot">&lt;-</span> <span class="fu">read_table</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/yeast.data"</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">"seq_name"</span>, <span class="st">"mcg"</span>, <span class="st">"gvh"</span>, <span class="st">"alm"</span>, <span class="st">"mit"</span>, <span class="st">"erl"</span>, <span class="st">"pox"</span>, <span class="st">"vac"</span>, <span class="st">"nuc"</span>, <span class="st">"class"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
── Column specification ────────────────────────────────────────────────────────
cols(
  seq_name = col_character(),
  mcg = col_double(),
  gvh = col_double(),
  alm = col_double(),
  mit = col_double(),
  erl = col_double(),
  pox = col_double(),
  vac = col_double(),
  nuc = col_double(),
  class = col_character()
)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print tibble </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>yeast</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,484 × 10
   seq_name     mcg   gvh   alm   mit   erl   pox   vac   nuc class
   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
 1 ADT1_YEAST  0.58  0.61  0.47  0.13   0.5   0    0.48  0.22 MIT  
 2 ADT2_YEAST  0.43  0.67  0.48  0.27   0.5   0    0.53  0.22 MIT  
 3 ADT3_YEAST  0.64  0.62  0.49  0.15   0.5   0    0.53  0.22 MIT  
 4 AAR2_YEAST  0.58  0.44  0.57  0.13   0.5   0    0.54  0.22 NUC  
 5 AATM_YEAST  0.42  0.44  0.48  0.54   0.5   0    0.48  0.22 MIT  
 6 AATC_YEAST  0.51  0.4   0.56  0.17   0.5   0.5  0.49  0.22 CYT  
 7 ABC1_YEAST  0.5   0.54  0.48  0.65   0.5   0    0.53  0.22 MIT  
 8 BAF1_YEAST  0.48  0.45  0.59  0.2    0.5   0    0.58  0.34 NUC  
 9 ABF2_YEAST  0.55  0.5   0.66  0.36   0.5   0    0.49  0.22 MIT  
10 ABP1_YEAST  0.4   0.39  0.6   0.15   0.5   0    0.58  0.3  CYT  
# ℹ 1,474 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># overwrite last column and select observations</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>yeast <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(seq_name, nuc)) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(class) <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), mean, <span class="at">.names =</span> <span class="st">"mean_{.col}"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,484 × 15
# Groups:   class [10]
     mcg   gvh   alm   mit   erl   pox   vac class mean_mcg mean_gvh mean_alm
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1  0.58  0.61  0.47  0.13   0.5   0    0.48 MIT      0.521    0.533    0.517
 2  0.43  0.67  0.48  0.27   0.5   0    0.53 MIT      0.521    0.533    0.517
 3  0.64  0.62  0.49  0.15   0.5   0    0.53 MIT      0.521    0.533    0.517
 4  0.58  0.44  0.57  0.13   0.5   0    0.54 NUC      0.452    0.456    0.529
 5  0.42  0.44  0.48  0.54   0.5   0    0.48 MIT      0.521    0.533    0.517
 6  0.51  0.4   0.56  0.17   0.5   0.5  0.49 CYT      0.481    0.470    0.535
 7  0.5   0.54  0.48  0.65   0.5   0    0.53 MIT      0.521    0.533    0.517
 8  0.48  0.45  0.59  0.2    0.5   0    0.58 NUC      0.452    0.456    0.529
 9  0.55  0.5   0.66  0.36   0.5   0    0.49 MIT      0.521    0.533    0.517
10  0.4   0.39  0.6   0.15   0.5   0    0.58 CYT      0.481    0.470    0.535
11  0.43  0.39  0.54  0.21   0.5   0    0.53 NUC      0.452    0.456    0.529
12  0.42  0.37  0.59  0.2    0.5   0    0.52 NUC      0.452    0.456    0.529
13  0.4   0.42  0.57  0.35   0.5   0    0.53 CYT      0.481    0.470    0.535
14  0.6   0.4   0.52  0.46   0.5   0    0.53 MIT      0.521    0.533    0.517
15  0.66  0.55  0.45  0.19   0.5   0    0.46 MIT      0.521    0.533    0.517
16  0.46  0.44  0.52  0.11   0.5   0    0.5  CYT      0.481    0.470    0.535
17  0.47  0.39  0.5   0.11   0.5   0    0.49 CYT      0.481    0.470    0.535
18  0.58  0.47  0.54  0.11   0.5   0    0.51 NUC      0.452    0.456    0.529
19  0.5   0.34  0.55  0.21   0.5   0    0.49 NUC      0.452    0.456    0.529
20  0.61  0.6   0.55  0.21   0.5   0    0.5  NUC      0.452    0.456    0.529
21  0.45  0.4   0.5   0.16   0.5   0    0.5  CYT      0.481    0.470    0.535
22  0.43  0.44  0.48  0.22   0.5   0    0.51 CYT      0.481    0.470    0.535
23  0.73  0.63  0.42  0.3    0.5   0    0.49 CYT      0.481    0.470    0.535
24  0.43  0.53  0.52  0.13   0.5   0    0.55 CYT      0.481    0.470    0.535
25  0.46  0.53  0.52  0.15   0.5   0    0.58 CYT      0.481    0.470    0.535
26  0.51  0.51  0.52  0.51   0.5   0    0.54 MIT      0.521    0.533    0.517
27  0.59  0.45  0.53  0.19   0.5   0    0.59 CYT      0.481    0.470    0.535
28  0.57  0.47  0.6   0.18   0.5   0    0.51 CYT      0.481    0.470    0.535
29  0.63  0.67  0.57  0.24   0.5   0    0.49 MIT      0.521    0.533    0.517
30  0.8   0.88  0.36  0.39   0.5   0    0.56 ME1      0.789    0.757    0.376
31  0.53  0.54  0.43  0.1    0.5   0    0.57 NUC      0.452    0.456    0.529
32  0.51  0.51  0.43  0.87   0.5   0    0.52 MIT      0.521    0.533    0.517
33  0.38  0.61  0.61  0.12   0.5   0    0.53 CYT      0.481    0.470    0.535
34  0.33  0.55  0.51  0.43   0.5   0    0.51 NUC      0.452    0.456    0.529
35  0.78  0.74  0.42  0.26   0.5   0    0.43 ME1      0.789    0.757    0.376
36  0.74  0.67  0.47  0.34   0.5   0    0.42 EXC      0.735    0.717    0.493
37  0.72  0.61  0.45  0.3    0.5   0    0.54 MIT      0.521    0.533    0.517
38  0.4   0.45  0.57  0.18   0.5   0    0.56 CYT      0.481    0.470    0.535
39  0.59  0.53  0.43  0.44   0.5   0    0.5  MIT      0.521    0.533    0.517
40  0.57  0.53  0.53  0.34   0.5   0    0.53 MIT      0.521    0.533    0.517
41  0.86  0.68  0.39  0.24   0.5   0    0.54 ME2      0.722    0.603    0.415
42  0.86  0.74  0.51  0.4    0.5   0    0.55 ME2      0.722    0.603    0.415
43  0.79  0.57  0.41  0.28   0.5   0    0.59 ME2      0.722    0.603    0.415
44  0.41  0.54  0.39  0.2    0.5   0    0.51 ME3      0.431    0.490    0.364
45  0.37  0.36  0.56  0.18   0.5   0    0.48 VAC      0.548    0.526    0.465
46  0.53  0.31  0.58  0.39   0.5   0    0.47 NUC      0.452    0.456    0.529
47  0.74  0.75  0.58  0.47   0.5   0    0.4  ME2      0.722    0.603    0.415
48  0.49  0.39  0.52  0.29   0.5   0    0.48 EXC      0.735    0.717    0.493
49  0.74  0.57  0.51  0.28   0.5   0    0.58 VAC      0.548    0.526    0.465
50  0.42  0.24  0.34  0.16   0.5   0    0.5  ME3      0.431    0.490    0.364
# ℹ 1,434 more rows
# ℹ 4 more variables: mean_mit &lt;dbl&gt;, mean_erl &lt;dbl&gt;, mean_pox &lt;dbl&gt;,
#   mean_vac &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="task-3-combining-excel-and-delimited-data" class="level2">
<h2 class="anchored" data-anchor-id="task-3-combining-excel-and-delimited-data">Task 3: Combining Excel and Delimited Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># read in white wine dataset</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>white_wine <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"white-wine.xlsx"</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>white_wine</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,898 × 12
   `fixed acidity` `volatile acidity` `citric acid` `residual sugar` chlorides
             &lt;dbl&gt;              &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;     &lt;dbl&gt;
 1               7               0.27          0.36             20.7     0.045
 2              63               0.3           0.34              1.6     0.049
 3              81               0.28          0.4               6.9     0.05 
 4              72               0.23          0.32              8.5     0.058
 5              72               0.23          0.32              8.5     0.058
 6              81               0.28          0.4               6.9     0.05 
 7              62               0.32          0.16              7       0.045
 8               7               0.27          0.36             20.7     0.045
 9              63               0.3           0.34              1.6     0.049
10              81               0.22          0.43              1.5     0.044
# ℹ 4,888 more rows
# ℹ 7 more variables: `free sulfur dioxide` &lt;dbl&gt;,
#   `total sulfur dioxide` &lt;dbl&gt;, density &lt;dbl&gt;, pH &lt;dbl&gt;, sulphates &lt;dbl&gt;,
#   alcohol &lt;dbl&gt;, quality &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in col names</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>col_name <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"white-wine.xlsx"</span>, </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">sheet =</span> <span class="fu">excel_sheets</span>(<span class="st">"white-wine.xlsx"</span>)[<span class="dv">2</span>])</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>col_name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 1
   Variables           
   &lt;chr&gt;               
 1 fixed_acidity       
 2 volatile_acidity    
 3 citric_acid         
 4 residual_sugar      
 5 chlorides           
 6 free_sulfur_dioxide 
 7 total_sulfur_dioxide
 8 density             
 9 pH                  
10 sulphates           
11 alcohol             
12 quality             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># overwrite the current column names</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(white_wine) <span class="ot">&lt;-</span> col_name<span class="sc">$</span>Variables</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># add a new column</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>white_wine <span class="ot">&lt;-</span> white_wine <span class="sc">|&gt;</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">"white"</span>)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># read in red wine dataset</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>red_wine <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">"https://www4.stat.ncsu.edu/~online/datasets/red-wine.csv"</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>, <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">.default =</span> <span class="st">"n"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>ℹ Using "','" as decimal and "'.'" as grouping mark. Use `read_delim()` for more control.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># overwrite the current column names</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(red_wine) <span class="ot">&lt;-</span> col_name<span class="sc">$</span>Variables</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># add a new column</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>red_wine <span class="ot">&lt;-</span> red_wine <span class="sc">|&gt;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">"red"</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co"># combine two datasets</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>wine <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(white_wine, red_wine)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co"># filter, select and add new stats columns</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>wine <span class="sc">|&gt;</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(quality <span class="sc">&gt;</span> <span class="fl">6.5</span> <span class="sc">|</span> alcohol <span class="sc">&lt;</span> <span class="dv">132</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(quality)) <span class="sc">|&gt;</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(quality) <span class="sc">|&gt;</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">alcohol_mean =</span> <span class="fu">mean</span>(alcohol), <span class="at">alcohol_std =</span> <span class="fu">sd</span>(alcohol)) <span class="sc">|&gt;</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n=</span><span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,404 × 15
# Groups:   quality [7]
   fixed_acidity volatile_acidity citric_acid residual_sugar chlorides
           &lt;dbl&gt;            &lt;dbl&gt;       &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;
 1            91             0.27        0.45          10.6      0.035
 2            66             0.36        0.29           1.6      0.021
 3            74             0.24        0.36           2        0.031
 4            69             0.36        0.34           4.2      0.018
 5            71             0.26        0.49           2.2      0.032
 6            62             0.66        0.48           1.2      0.029
 7            62             0.66        0.48           1.2      0.029
 8            68             0.26        0.42           1.7      0.049
 9            67             0.23        0.31           2.1      0.046
10            67             0.23        0.31           2.1      0.046
11            52             0.44        0.04           1.4      0.036
12            52             0.44        0.04           1.4      0.036
13            68             0.53        0.35           3.8      0.034
14            67             0.26        0.39           1.1      0.04 
15             7             0.24        0.36           2.8      0.034
16            61             0.31        0.58           5        0.039
17             5             0.55        0.14           8.3      0.032
18            64             0.32        0.35           4.8      0.03 
19             7             0.23        0.36           7.1      0.028
20            66             0.16        0.32           1.4      0.035
21             6             0.25        0.28           2.2      0.026
22            59             0.27        0.29          11.4      0.036
23            65             0.36        0.28           3.2      0.037
24            62             0.24        0.29          13.3      0.039
25            71             0.32        0.34          14.5      0.039
26            66             0.33        0.31           1.3      0.02 
27            81             0.17        0.44          14.1      0.053
28            81             0.17        0.44          14.1      0.053
29             6             0.18        0.31           1.4      0.036
30            73             0.3         0.34           2.7      0.044
31            75             0.42        0.34           4.3      0.04 
32            73             0.25        0.36           2.1      0.034
33            73             0.25        0.36           2.1      0.034
34            73             0.25        0.36           2.1      0.034
35            73             0.21        0.29           1.6      0.034
36            73             0.21        0.29           1.6      0.034
37            81             0.27        0.35           1.7      0.03 
38            78             0.18        0.46          12.6      0.042
39            69             0.12        0.36           2.2      0.037
40            69             0.21        0.28           2.4      0.056
41            71             0.25        0.39           2.1      0.036
42            79             0.28        0.41           2        0.044
43            68             0.19        0.32           7.05     0.019
44            52             0.24        0.45           3.8      0.027
45             7             0.24        0.32           1.3      0.037
46            53             0.24        0.33           1.3      0.033
47            52             0.24        0.45           3.8      0.027
48             7             0.15        0.38           2.2      0.047
49             6             0.26        0.42           5.2      0.027
50            61             0.31        0.37           8.4      0.031
# ℹ 6,354 more rows
# ℹ 10 more variables: free_sulfur_dioxide &lt;dbl&gt;, total_sulfur_dioxide &lt;dbl&gt;,
#   density &lt;dbl&gt;, pH &lt;dbl&gt;, sulphates &lt;dbl&gt;, alcohol &lt;dbl&gt;, quality &lt;dbl&gt;,
#   type &lt;chr&gt;, alcohol_mean &lt;dbl&gt;, alcohol_std &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="task-4-database-practice" class="level2">
<h2 class="anchored" data-anchor-id="task-4-database-practice">Task 4: Database Practice</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#connect to database</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="st">"lahman.db"</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#list all tables</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dbListTables</span>(con)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "AllstarFull"         "Appearances"         "AwardsManagers"     
 [4] "AwardsPlayers"       "AwardsShareManagers" "AwardsSharePlayers" 
 [7] "Batting"             "BattingPost"         "CollegePlaying"     
[10] "Fielding"            "FieldingOF"          "FieldingOFsplit"    
[13] "FieldingPost"        "HallOfFame"          "HomeGames"          
[16] "LahmanData"          "Managers"            "ManagersHalf"       
[19] "Parks"               "People"              "Pitching"           
[22] "PitchingPost"        "Salaries"            "Schools"            
[25] "SeriesPost"          "Teams"               "TeamsFranchises"    
[28] "TeamsHalf"           "battingLabels"       "fieldingLabels"     
[31] "pitchingLabels"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># return Teams table for for 2025 use tbl()</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tbl</span>(con, <span class="st">"Teams"</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(yearID <span class="sc">==</span> <span class="dv">2015</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 48]
# Database: sqlite 3.45.0 [/Users/xingwangyu/Dropbox/My Mac (Xingwangs-MacBook-Pro.local)/Documents/ST558/Homework3/lahman.db]
   yearID lgID  teamID franchID divID  Rank     G Ghome     W     L DivWin WCWin
    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;
 1   2015 NL    ARI    ARI      W         3   162    81    79    83 N      N    
 2   2015 NL    ATL    ATL      E         4   162    81    67    95 N      N    
 3   2015 AL    BAL    BAL      E         3   162    78    81    81 N      N    
 4   2015 AL    BOS    BOS      E         5   162    81    78    84 N      N    
 5   2015 AL    CHA    CHW      C         4   162    81    76    86 N      N    
 6   2015 NL    CHN    CHC      C         3   162    81    97    65 N      Y    
 7   2015 NL    CIN    CIN      C         5   162    81    64    98 N      N    
 8   2015 AL    CLE    CLE      C         3   161    80    81    80 N      N    
 9   2015 NL    COL    COL      W         5   162    81    68    94 N      N    
10   2015 AL    DET    DET      C         5   161    81    74    87 N      N    
# ℹ more rows
# ℹ 36 more variables: LgWin &lt;chr&gt;, WSWin &lt;chr&gt;, R &lt;int&gt;, AB &lt;int&gt;, H &lt;int&gt;,
#   X2B &lt;int&gt;, X3B &lt;int&gt;, HR &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;,
#   HBP &lt;int&gt;, SF &lt;int&gt;, RA &lt;int&gt;, ER &lt;int&gt;, ERA &lt;dbl&gt;, CG &lt;int&gt;, SHO &lt;int&gt;,
#   SV &lt;int&gt;, IPouts &lt;int&gt;, HA &lt;int&gt;, HRA &lt;int&gt;, BBA &lt;int&gt;, SOA &lt;int&gt;, E &lt;int&gt;,
#   DP &lt;int&gt;, FP &lt;dbl&gt;, name &lt;chr&gt;, park &lt;chr&gt;, attendance &lt;int&gt;, BPF &lt;int&gt;,
#   PPF &lt;int&gt;, teamIDBR &lt;chr&gt;, teamIDlahman45 &lt;chr&gt;, teamIDretro &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># redo above using sql()</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tbl</span>(con, <span class="fu">sql</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"SELECT * FROM 'TEAMS'</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="st">   WHERE (`yearID` = 2015)"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 48]
# Database: sqlite 3.45.0 [/Users/xingwangyu/Dropbox/My Mac (Xingwangs-MacBook-Pro.local)/Documents/ST558/Homework3/lahman.db]
   yearID lgID  teamID franchID divID  Rank     G Ghome     W     L DivWin WCWin
    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;
 1   2015 NL    ARI    ARI      W         3   162    81    79    83 N      N    
 2   2015 NL    ATL    ATL      E         4   162    81    67    95 N      N    
 3   2015 AL    BAL    BAL      E         3   162    78    81    81 N      N    
 4   2015 AL    BOS    BOS      E         5   162    81    78    84 N      N    
 5   2015 AL    CHA    CHW      C         4   162    81    76    86 N      N    
 6   2015 NL    CHN    CHC      C         3   162    81    97    65 N      Y    
 7   2015 NL    CIN    CIN      C         5   162    81    64    98 N      N    
 8   2015 AL    CLE    CLE      C         3   161    80    81    80 N      N    
 9   2015 NL    COL    COL      W         5   162    81    68    94 N      N    
10   2015 AL    DET    DET      C         5   161    81    74    87 N      N    
# ℹ more rows
# ℹ 36 more variables: LgWin &lt;chr&gt;, WSWin &lt;chr&gt;, R &lt;int&gt;, AB &lt;int&gt;, H &lt;int&gt;,
#   X2B &lt;int&gt;, X3B &lt;int&gt;, HR &lt;int&gt;, BB &lt;int&gt;, SO &lt;int&gt;, SB &lt;int&gt;, CS &lt;int&gt;,
#   HBP &lt;int&gt;, SF &lt;int&gt;, RA &lt;int&gt;, ER &lt;int&gt;, ERA &lt;dbl&gt;, CG &lt;int&gt;, SHO &lt;int&gt;,
#   SV &lt;int&gt;, IPouts &lt;int&gt;, HA &lt;int&gt;, HRA &lt;int&gt;, BBA &lt;int&gt;, SOA &lt;int&gt;, E &lt;int&gt;,
#   DP &lt;int&gt;, FP &lt;dbl&gt;, name &lt;chr&gt;, park &lt;chr&gt;, attendance &lt;int&gt;, BPF &lt;int&gt;,
#   PPF &lt;int&gt;, teamIDBR &lt;chr&gt;, teamIDlahman45 &lt;chr&gt;, teamIDretro &lt;chr&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># return hall of frame</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tbl</span>(con, <span class="st">'HallOfFame'</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(inducted <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">|&gt;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(playerID, yearID, category) <span class="sc">|&gt;</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 340 × 3
   playerID  yearID category         
   &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;            
 1 cobbty01    1936 Player           
 2 ruthba01    1936 Player           
 3 wagneho01   1936 Player           
 4 mathech01   1936 Player           
 5 johnswa01   1936 Player           
 6 lajoina01   1937 Player           
 7 speaktr01   1937 Player           
 8 youngcy01   1937 Player           
 9 bulkemo99   1937 Pioneer/Executive
10 johnsba99   1937 Pioneer/Executive
# ℹ 330 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combine with People table to get name</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(<span class="fu">tbl</span>(con, <span class="st">'HallOfFame'</span>) <span class="sc">|&gt;</span> <span class="fu">filter</span>(inducted <span class="sc">==</span> <span class="st">"Y"</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(playerID, yearID, category), </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">tbl</span>(con, <span class="st">'People'</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(playerID, nameFirst, nameLast),</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">by =</span> <span class="fu">join_by</span>(playerID <span class="sc">==</span> playerID)) <span class="sc">|&gt;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect</span>()</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># return Managers table</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>dat2 <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">"Managers"</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(playerID, G, W, L) <span class="sc">|&gt;</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(playerID) <span class="sc">|&gt;</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">G_managed =</span> <span class="fu">sum</span>(G, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">Total_W =</span> <span class="fu">sum</span>(W, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">Total_L =</span> <span class="fu">sum</span>(L, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">win_percent =</span> Total_W<span class="sc">/</span>G_managed) <span class="sc">|&gt;</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_W<span class="sc">/</span>G_managed))</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="co"># join dat1 and dat2</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(dat1, dat2, <span class="at">by =</span> <span class="fu">join_by</span>(playerID <span class="sc">==</span> playerID))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 97 × 9
   playerID  yearID category        nameFirst nameLast G_managed Total_W Total_L
   &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;        &lt;int&gt;   &lt;int&gt;   &lt;int&gt;
 1 cobbty01    1936 Player          Ty        Cobb           933     479     444
 2 wagneho01   1936 Player          Honus     Wagner           5       1       4
 3 mathech01   1936 Player          Christy   Mathews…       346     164     176
 4 johnswa01   1936 Player          Walter    Johnson        966     529     432
 5 lajoina01   1937 Player          Nap       Lajoie         700     377     309
 6 speaktr01   1937 Player          Tris      Speaker       1139     617     520
 7 youngcy01   1937 Player          Cy        Young            6       3       3
 8 mackco01    1937 Manager         Connie    Mack          7755    3731    3948
 9 mcgrajo01   1937 Manager         John      McGraw        4769    2763    1948
10 wrighge01   1937 Pioneer/Execut… George    Wright          85      59      25
# ℹ 87 more rows
# ℹ 1 more variable: win_percent &lt;dbl&gt;</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>